const generalItemUrl=window.location.protocol+"//"+window.location.host;let itemUrl="",prevItemId=null;const quickviewBtn='<div class="quickview_btn" role="button">'+btn_text+"</div>",linkItem='<div class="link_wrapper"><a class="quickview_item_link" href="#">'+go_to_item_btn_text+"</a></div>";let itemUpgrades={},isMultiple=!1,htmlData="",storeLayout=$("body").attr("data-layout"),listItemQvBtn="";listItemQvBtn="true"==eye_icon?'<div class="quickview_btn_wrapper">'+quickviewBtn+'<svg style="color: white" xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16"> <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z" fill="white"></path> <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z" fill="white"></path> </svg></div>':'<div class="quickview_btn_wrapper">'+quickviewBtn+"</div>";const itemsExcept=()=>{$(".layout_list_item").each(function(){let e=$(this),t=e.find(".item_class").text();t&&""!=t&&e.addClass(t)})},quickviewLayoutListItems=()=>{try{$("body:not(.articles) .layout_list_item:not(.set_quickview)").each(function(){let e=$(this);e.addClass("set_quickview"),e.find(".grid").append(listItemQvBtn),e.find(".quickview_btn").click(function(e){e.preventDefault();let t=$(this).parents(".layout_list_item").first().attr("id").match(/\d+/)[0],a=$(this).parents(".layout_list_item").first().find("a").attr("href").trim();quickviewBtnClickHandler(t,a)})})}catch(e){console.log("TCL: function quickviewLayoutListItems -> error",e)}},quickviewDynamicCarousel=()=>{try{!window.location.href.includes("secure.konimbo")&&$("body #bg_middle #dynamic-carousel-client").length&&$("body #dynamic-carousel-client .swiper-slide:not(.set_quickview)").each(function(){let e=$(this);e.append(listItemQvBtn),e.addClass("set_quickview"),e.find(".quickview_btn").click(function(){let e=$(this).parents(".swiper-slide").first().attr("data-item-id");quickviewBtnClickHandler(e)})})}catch(e){console.log("TCL: function quickviewDynamicCarousel -> error",e)}},quickviewFuncInfscr=()=>{try{$(document).ajaxComplete(function(e,t,a){quickviewLayoutListItems()})}catch(e){console.log("TCL: quickviewFuncInfscr -> error",e)}},quickviewBtnClickHandler=(e,t)=>{try{$("#quickview_loading_animation_wrapper").show(),$("#wrap_quickview").fadeIn(),prevItemId!=e?(prevItemId=e,isMultiple=!1,itemUpgrades={},itemUrl=t&&t.includes("current_customer")?t:t&&t.includes("/items/")&&!t.includes("current_customer")?generalItemUrl+t:generalItemUrl+"/items/"+e,$("#wrap_quickview").removeAttr("class"),$("#wrap_quickview").attr("item-id",e),$.ajax({url:itemUrl,method:"GET",success:function(e){htmlData=e,$("#wrap_quickview .quickview_main").html($(e).find("form#new_order")),$("#wrap_quickview").trigger("openqv"),$("#quickview_loading_animation_wrapper").fadeOut(0),quickviewFadein(),generalChangesInQuickview(itemUrl),quickviewChangesAfterLoad()}})):("true"==show_addCart&&resetCounter(),$("#quickview_loading_animation_wrapper").fadeOut(0),quickviewFadein())}catch(a){console.log("TCL: quickviewBtnClickHandler -> error",a)}},quickviewFadein=()=>{try{$("#wrap_quickview .quickview").fadeIn(0)}catch(e){console.log("TCL: quickviewFadein -> error",e)}},quickviewFadeout=()=>{try{$("#wrap_quickview, #wrap_quickview .quickview").fadeOut(300)}catch(e){console.log("TCL: quickviewFadeout -> error",e)}},generalChangesInQuickview=e=>{try{$("#wrap_quickview #item_info").remove(),"function"==typeof quickviewExtraCode&&quickviewExtraCode(),""==$("#wrap_quickview #item_details .code_item").text().trim()&&$("#wrap_quickview #item_details .code_item").hide(),$("#wrap_quickview .item_main_bottom_left").length>0?$("#wrap_quickview .item_main_bottom_left").append(linkItem):$("#wrap_quickview #item_details").append(linkItem),$("#wrap_quickview .quickview_item_link").attr("href",e),$("#wrap_quickview #item_link_buy_now .contactNow a").text("צור קשר"),quickviewAdminFieldsChanges(),(-1==storeLayout?.indexOf("responsive")||void 0==storeLayout)&&quickviewChangesClassic(),sortUpgradesToShow(),quickviewStrengthsChanges(),quickviewInventoryChanges()}catch(t){console.log("TCL: generalChangesInQuickview -> error",t)}},quickviewChangesClassic=()=>{0==$("#wrap_quickview #item_details .item_main_top").length&&($("#wrap_quickview #item_details").prepend("<div class='item_main_top'></div>"),$("#wrap_quickview #item_details .item_main_top").append($("#wrap_quickview #item_current_title")),$("#wrap_quickview #item_details .item_main_top").append($("#wrap_quickview #item_current_sub_title")),$("#wrap_quickview #item_details .item_main_top").append($("#wrap_quickview .sub_title_read_more_wrap")),$("#wrap_quickview #item_details .item_main_top").append($("#wrap_quickview #item_anchors"))),0==$("#wrap_quickview #item_details .item_main_bottom").length&&($("#wrap_quickview #item_details").append("<div class='item_main_bottom'></div>"),$("#wrap_quickview #item_details .item_main_bottom").append("<div class='item_main_bottom_right'></div><div class='item_main_bottom_left'></div>"),$("#wrap_quickview .item_main_bottom_right").append("<div class='wrap_show_upgrades_top'></div><div class='main_price_and_btn'></div><div class='wrap_shipping_warranty_delivery'></div>"),0==$(".special_cart_wrapper").length?$("#wrap_quickview .item_main_bottom_right .main_price_and_btn").append("<div class='wrap_price'></div><div class='special_cart_wrapper'></div>"):($("#wrap_quickview .item_main_bottom_right .main_price_and_btn").append("<div class='wrap_price'></div>"),$("#wrap_quickview .item_main_bottom_right .main_price_and_btn").append($(".special_cart_wrapper"))),$("#wrap_quickview .item_main_bottom_right .wrap_show_upgrades_top").append($("#wrap_quickview #item_upgrades_top")),$("#wrap_quickview .item_main_bottom_right .wrap_price").append($("#wrap_quickview #item_show_price")),$("#wrap_quickview .item_main_bottom_right .wrap_price").append($("#wrap_quickview .item_show_origin_price")),$("#wrap_quickview .item_main_bottom_right .wrap_shipping_warranty_delivery").append($("#wrap_quickview #shipping_warranty_delivery")),$("#wrap_quickview .item_main_bottom_right .special_cart_wrapper").append($("#wrap_quickview .product_quantity")),$("#wrap_quickview .item_main_bottom_right .special_cart_wrapper").append($("#wrap_quickview .fake_quantity")),$("#wrap_quickview .item_main_bottom_right .special_cart_wrapper").append($("#wrap_quickview #item_link_buy_now")),$("#wrap_quickview .item_main_bottom_right .special_cart_wrapper").append($(".zero_val_comment")),$("#wrap_quickview .item_main_bottom_left").append($("#wrap_quickview #item_current_content")),$("#wrap_quickview .item_main_bottom_left").append($("#wrap_quickview .link_ask_about_item")),$("#wrap_quickview .item_main_bottom_left").append("<div class='extra_icons'></div>"),$("#wrap_quickview .extra_icons").append($("#wrap_quickview #item_safe_buy")),$("#wrap_quickview .extra_icons").append($("#wrap_quickview .truck")),$("#wrap_quickview .item_main_bottom_left").append($("#wrap_quickview .link_wrapper")),$("#wrap_quickview #item_details > div:not(.item_main_top):not(.item_main_bottom):not(.link_wrapper), #wrap_quickview #item_details > span").remove(),$("#wrap_quickview #item_group1").remove())},classicGallery=()=>{try{var e=document.documentMode||0,t=$.browser?.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!e,a=null;!function(e){var t,a,n,r,s,c,l,o,p,d,u,h,v=0,w={},m=[],f=0,g={},k=[],y=null,q=new Image,b=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,x=/[^\.]\.(swf)\s*$/i,_=1,C=!1,I=e.extend(e("<div/>")[0],{prop:0}),O=0,A=!e.support.opacity&&!window.XMLHttpRequest,S=function(){a.hide(),q.onerror=q.onload=null,y&&y.abort(),t.empty()},T=function(){e.fancybox('<p id="fancybox_error">The requested content cannot be loaded.<br />Please try again later.</p>',{scrolling:"no",padding:20,transitionIn:"none",transitionOut:"none"})},L=function(){return[e(window).width(),e(window).height(),e(document).scrollLeft(),e(document).scrollTop()]},B=function(){var e,t=L(),a={},n=g.margin,r=g.autoScale,s=(20+n)*2,c=(20+n)*2,l=2*g.padding;return g.width.toString().indexOf("%")>-1?(a.width=t[0]*parseFloat(g.width)/100-40,r=!1):a.width=g.width+l,g.height.toString().indexOf("%")>-1?(a.height=t[1]*parseFloat(g.height)/100-40,r=!1):a.height=g.height+l,r&&(a.width>t[0]-s||a.height>t[1]-c)&&("image"==w.type||"swf"==w.type?(s+=l,c+=l,e=Math.min(Math.min(t[0]-s,g.width)/g.width,Math.min(t[1]-c,g.height)/g.height),a.width=Math.round(e*(a.width-l))+l,a.height=Math.round(e*(a.height-l))+l):(a.width=Math.min(a.width,t[0]-s),a.height=Math.min(a.height,t[1]-c))),a.top=t[3]+(t[1]-(a.height+40))*.5,a.left=t[2]+(t[0]-(a.width+40))*.5,!1===g.autoScale&&(a.top=Math.max(t[3]+n,a.top),a.left=Math.max(t[2]+n,a.left)),a},N=function(e){if(e&&e.length)switch(g.titlePosition){case"inside":return e;case"over":return'<span id="fancybox-title-over">'+e+"</span>";default:return f+1+" / "+k.length}return!1},D=function(){var t=g.title;if(h.width,g.padding,g.titlePosition,e("#fancybox-title").remove(),O=0,!1!==g.titleShow){switch(t=e.isFunction(g.titleFormat)?g.titleFormat(t,k,f,g):N(t),e("#imageNumber").remove(),e('<div id="imageNumber" />').html(t).appendTo("#fancybox-wrap"),g.titlePosition){case"inside":O=e("#fancybox-title").outerHeight(!0)-g.padding,h.height+=O;break;case"over":e("#fancybox-title").css("bottom",g.padding);break;default:e("#fancybox-title").css("bottom",-1*e("#fancybox-title").outerHeight(!0))}e("#fancybox-title").appendTo(s).hide()}},F=function(){e(document).unbind("keydown.fb").bind("keydown.fb",function(t){27==t.keyCode&&g.enableEscapeButton?(t.preventDefault(),e.fancybox.close()):37==t.keyCode?(t.preventDefault(),e.fancybox.prev()):39==t.keyCode&&(t.preventDefault(),e.fancybox.next())}),e.fn.mousewheel&&(r.unbind("mousewheel.fb"),k.length>1&&r.bind("mousewheel.fb",function(t,a){t.preventDefault(),!C&&0!==a&&(a>0?e.fancybox.prev():e.fancybox.next())})),g.showNavArrows&&((g.cyclic&&k.length>1||0!==f)&&o.show(),(g.cyclic&&k.length>1||f!=k.length-1)&&p.show())},H=function(){var e,t;k.length-1>f&&(e=k[f+1].href,void 0!==e&&e.match(b)&&((t=new Image).src=e)),f>0&&(e=k[f-1].href,void 0!==e&&e.match(b)&&((t=new Image).src=e))},j=function(){c.css("overflow","auto"==g.scrolling?"image"==g.type||"iframe"==g.type||"swf"==g.type?"hidden":"auto":"yes"==g.scrolling?"auto":"visible"),e.support.opacity||(c.get(0).style.removeAttribute("filter"),r.get(0).style.removeAttribute("filter")),e("#fancybox-title").show(),g.hideOnContentClick&&c.one("click",e.fancybox.close),g.hideOnOverlayClick&&n.one("click",e.fancybox.close),g.showCloseButton&&l.show(),F(),e(window).bind("resize.fb",e.fancybox.center),g.centerOnScroll?e(window).bind("scroll.fb",e.fancybox.center):e(window).unbind("scroll.fb"),e.isFunction(g.onComplete)&&g.onComplete(k,f,g),C=!1,H()},z=function(e){var t=Math.round(u.width+(h.width-u.width)*e),a=Math.round(u.height+(h.height-u.height)*e),n=Math.round(u.top+(h.top-u.top)*e),s=Math.round(u.left+(h.left-u.left)*e);r.css({width:t+"px",height:a+"px",top:n+"px",left:s+"px"}),t=Math.max(t-2*g.padding,0),a=Math.max(a-(2*g.padding+O*e),0),c.css({width:t+"px",height:a+"px"}),void 0!==h.opacity&&r.css("opacity",e<.5?.5:e)},P=function(e){var t=e.offset();return t.top+=parseFloat(e.css("paddingTop"))||0,t.left+=parseFloat(e.css("paddingLeft"))||0,t.top+=parseFloat(e.css("border-top-width"))||0,t.left+=parseFloat(e.css("border-left-width"))||0,t.width=e.width(),t.height=e.height(),t},M=function(){var t,a,n=!!w.orig&&e(w.orig),r={};return n&&n.length?r={width:(t=P(n)).width+2*g.padding,height:t.height+2*g.padding,top:t.top-g.padding-20,left:t.left-g.padding-20}:(a=L(),r={width:1,height:1,top:a[3]+.5*a[1],left:a[2]+.5*a[0]}),r},U=function(){if(a.hide(),r.is(":visible")&&e.isFunction(g.onCleanup)&&!1===g.onCleanup(k,f,g)){e.event.trigger("fancybox-cancel"),C=!1;return}if(k=m,f=v,g=w,c.get(0).scrollTop=0,c.get(0).scrollLeft=0,g.overlayShow&&(A&&e("select:not(#fancybox-tmp select)").filter(function(){return"hidden"!==this.style.visibility}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"}),n.css({"background-color":g.overlayColor,opacity:g.overlayOpacity}).unbind().show()),h=B(),D(),r.is(":visible")){e(l.add(o).add(p)).hide();var s,d=r.position();s=(u={top:d.top,left:d.left,width:r.width(),height:r.height()}).width==h.width&&u.height==h.height,c.fadeOut(g.changeFade,function(){var a=function(){c.html(t.contents()).fadeIn(g.changeFade,j)};e.event.trigger("fancybox-change"),c.empty().css("overflow","hidden"),s?(c.css({top:g.padding,left:g.padding,width:Math.max(h.width-2*g.padding,1),height:Math.max(h.height-2*g.padding-O,1)}),a()):(c.css({top:g.padding,left:g.padding,width:Math.max(u.width-2*g.padding,1),height:Math.max(u.height-2*g.padding,1)}),I.prop=0,e(I).animate({prop:1},{duration:g.changeSpeed,easing:g.easingChange,step:z,complete:a}))});return}r.css("opacity",1),"elastic"==g.transitionIn?(u=M(),c.css({top:g.padding,left:g.padding,width:Math.max(u.width-2*g.padding,1),height:Math.max(u.height-2*g.padding,1)}).html(t.contents()),r.css(u).show(),g.opacity&&(h.opacity=0),I.prop=0,e(I).animate({prop:1},{duration:g.speedIn,easing:g.easingIn,step:z,complete:j})):(c.css({top:g.padding,left:g.padding,width:Math.max(h.width-2*g.padding,1),height:Math.max(h.height-2*g.padding-O,1)}).html(t.contents()),r.css(h).fadeIn("none"==g.transitionIn?0:g.speedIn,j))},Q=function(){"auto"==w.width&&(w.width=t.width()),"auto"==w.height&&(w.height=t.height()),U()},E=function(){C=!0;var a=e('<div id="img"></div>');e("<img />").attr({id:"fancybox-img",src:q.src,alt:w.title}).appendTo(a),a.appendTo(t),q.width>500?(e("#fancybox-img").width(500),e("#fancybox-img").height("auto")):(e("#fancybox-img").width("auto"),q.height>500&&e("#fancybox-img").height(500)),badBrowser&&e("#fancybox-img").css({display:"none"}).vAlign(),U()},W=function(){S();var a,n,r,s,l,o,p,d=m[v];if(w=e.extend({},e.fn.fancybox.defaults,void 0===e(d).data("fancybox")?w:e(d).data("fancybox")),r=d.title||e(d).title||w.title||"",d.nodeName&&!w.orig&&(w.orig=e(d).children("img:first").length?e(d).children("img:first"):e(d)),""===r&&w.orig&&(r=w.orig.attr("alt")),a=d.nodeName&&/^(?:javascript|#)/i.test(d.href)?w.href||null:w.href||d.href||null,w.type?(n=w.type,a||(a=w.content)):w.content?n="html":a?a.match(b)?n="image":a.match(x)?n="swf":e(d).hasClass("iframe")?n="iframe":a.match(/#/)?(d=a.substr(a.indexOf("#")),n=e(d).length>0?"inline":"ajax"):n="ajax":n="inline",w.type=n,w.href=a,w.title=r,w.autoDimensions&&"iframe"!==w.type&&"swf"!==w.type&&(w.width="auto",w.height="auto"),w.modal&&(w.overlayShow=!0,w.hideOnOverlayClick=!1,w.hideOnContentClick=!1,w.enableEscapeButton=!1,w.showCloseButton=!1),e.isFunction(w.onStart)&&!1===w.onStart(m,v,w)){C=!1;return}switch(t.css("padding",20+w.padding+w.margin),e(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){e(this).replaceWith(c.children())}),n){case"html":t.html(w.content),Q();break;case"inline":e('<div class="fancybox-inline-tmp" />').hide().insertBefore(e(d)).bind("fancybox-cleanup",function(){e(this).replaceWith(c.children())}).bind("fancybox-cancel",function(){e(this).replaceWith(t.children())}),e(d).appendTo(t),Q();break;case"image":C=!1,e.fancybox.showActivity(),(q=new Image).onerror=function(){T()},q.onload=function(){q.onerror=null,q.onload=null,E(),e("#fancybox-img").outerWidth(!1)>500&&(e("#fancybox-img").width(500),e("#fancybox-img").height("auto"))},q.src=a;break;case"swf":s='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+w.width+'" height="'+w.height+'"><param name="movie" value="'+a+'"></param>',l="",e.each(w.swf,function(e,t){s+='<param name="'+e+'" value="'+t+'"></param>',l+=" "+e+'="'+t+'"'}),s+="<embed src='"+a+"' type='application/x-shockwave-flash' width='"+w.width+"' height='"+w.height+"'"+l+"></embed></object>",t.html(s),Q();break;case"div":U();break;case"ajax":o=a.split("#",2),p=w.ajax.data||{},o.length>1&&(a=o[0],"string"==typeof p?p+="&selector="+o[1]:p.selector=o[1]),C=!1,e.fancybox.showActivity(),y=e.ajax(e.extend(w.ajax,{url:a,data:p,error:T,success:function(e,a,n){200==y.status&&(t.html(e),Q())}}));break;case"iframe":e('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" scrolling="'+w.scrolling+"' src='"+w.href+"'></iframe>").appendTo(t),U()}},V=function(){if(!a.is(":visible")){clearInterval(d);return}e("div",a).css("top",-40*_+"px"),_=(_+1)%12},R=function(){!e("#fancybox-wrap").length&&(e("body").append(t=e('<div id="fancybox-tmp"></div>'),a=e('<div id="fancybox-loading"><div></div></div>'),n=e('<div id="fancybox-overlay"></div>'),r=e('<div id="fancybox-wrap"></div>')),e.support.opacity||(r.addClass("fancybox-ie"),a.addClass("fancybox-ie")),(s=e('<div id="fancybox-outer"></div>').append('<div class="fancy-bg" id="fancy-bg-n"></div><div class="fancy-bg" id="fancy-bg-ne"></div><div class="fancy-bg" id="fancy-bg-e"></div><div class="fancy-bg" id="fancy-bg-se"></div><div class="fancy-bg" id="fancy-bg-s"></div><div class="fancy-bg" id="fancy-bg-sw"></div><div class="fancy-bg" id="fancy-bg-w"></div><div class="fancy-bg" id="fancy-bg-nw"></div>').appendTo(r)).append(c=e('<div id="fancybox-inner"></div>'),l=e('<a id="fancybox-close"></a>'),o=e('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),p=e('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>')),l.click(e.fancybox.close),a.click(e.fancybox.cancel),o.click(function(t){t.preventDefault(),e.fancybox.prev()}),p.click(function(t){t.preventDefault(),e.fancybox.next()}),A&&(n.get(0).style.setExpression("height","document.body.scrollHeight > document.body.offsetHeight ? document.body.scrollHeight : document.body.offsetHeight + 'px'"),a.get(0).style.setExpression("top","(-20 + (document.documentElement.clientHeight ? document.documentElement.clientHeight/2 : document.body.clientHeight/2 ) + ( ignoreMe = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop )) + 'px'"),s.prepend("<iframe id='fancybox-hide-sel-frame' src='javascript:\"\";' scrolling='no' frameborder='0' ></iframe>")))};e.fn.fancybox=function(t){return e(this).data("fancybox",e.extend({},t,e.metadata?e(this).metadata():{})).unbind("click.fb").bind("click.fb",function(t){if(t.preventDefault(),!C){C=!0,e(this).blur(),m=[],v=0;var a=e(this).attr("rel")||"";return a&&""!=a&&"nofollow"!==a?v=(m=e("a[rel="+a+"], area[rel="+a+"]")).index(this):m.push(this),W(),!1}}),this},e.fancybox=function(t){if(!C){C=!0;var a=void 0!==arguments[1]?arguments[1]:{};if(m=[],v=a.index||0,e.isArray(t)){for(var n=0,r=t.length;n<r;n++)"object"==typeof t[n]?e(t[n]).data("fancybox",e.extend({},a,t[n])):t[n]=e({}).data("fancybox",e.extend({content:t[n]},a));m=jQuery.merge(m,t)}else"object"==typeof t?e(t).data("fancybox",e.extend({},a,t)):t=e({}).data("fancybox",e.extend({content:t},a)),m.push(t);(v>m.length||v<0)&&(v=0),W()}},e.fancybox.showActivity=function(){clearInterval(d),a.show(),d=setInterval(V,66)},e.fancybox.hideActivity=function(){a.hide()},e.fancybox.next=function(){return e.fancybox.pos(f+1)},e.fancybox.prev=function(){return e.fancybox.pos(f-1)},e.fancybox.pos=function(e){!C&&((e=parseInt(e,10))>-1&&k.length>e&&(v=e,W()),g.cyclic&&k.length>1&&e<0&&(v=k.length-1,W()),g.cyclic&&k.length>1&&e>=k.length&&(v=0,W()))},e.fancybox.cancel=function(){!C&&(C=!0,e.event.trigger("fancybox-cancel"),S(),w&&e.isFunction(w.onCancel)&&w.onCancel(m,v,w),C=!1)},e.fancybox.close=function(){if(!(C||r.is(":hidden"))){if(C=!0,g&&e.isFunction(g.onCleanup)&&!1===g.onCleanup(k,f,g)){C=!1;return}if(S(),e(l.add(o).add(p)).hide(),e("#fancybox-title").remove(),r.add(c).add(n).unbind(),e(window).unbind("resize.fb scroll.fb"),e(document).unbind("keydown.fb"),c.css("overflow","hidden"),"elastic"==g.transitionOut){u=M();var t=r.position();h={top:t.top,left:t.left,width:r.width(),height:r.height()},g.opacity&&(h.opacity=1),I.prop=1,e(I).animate({prop:0},{duration:g.speedOut,easing:g.easingOut,step:z,complete:a})}else r.fadeOut("none"==g.transitionOut?0:g.speedOut,a)}function a(){n.fadeOut("fast"),r.hide(),e.event.trigger("fancybox-cleanup"),c.empty(),e.isFunction(g.onClosed)&&g.onClosed(k,f,g),k=w=[],f=v=0,g=w={},C=!1}},e.fancybox.resize=function(){var t,a;!(C||r.is(":hidden"))&&(C=!0,a=(t=c.wrapInner("<div style='overflow:auto'></div>").children()).height(),r.css({height:a+2*g.padding+O}),c.css({height:a}),t.replaceWith(t.children()),e.fancybox.center())},e.fancybox.center=function(){C=!0;var e=L(),t=g.margin,a={};a.top=e[3]+(e[1]-(r.height()-O+40))*.5,a.left=e[2]+(e[0]-(r.width()+40))*.5,a.top=Math.max(e[3]+t,a.top),a.left=Math.max(e[2]+t,a.left),r.css(a),C=!1},e.fn.fancybox.defaults={padding:10,margin:20,opacity:!1,modal:!1,cyclic:!1,scrolling:"auto",width:500,height:900,autoScale:!0,autoDimensions:!0,centerOnScroll:!1,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:!0,hideOnContentClick:!1,overlayShow:!0,overlayOpacity:.3,overlayColor:"#666",titleShow:!1,titlePosition:"outside",titleFormat:null,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:!0,showNavArrows:!0,enableEscapeButton:!0,onStart:null,onCancel:null,onComplete:null,onCleanup:null,onClosed:null},e(document).ready(function(){R()})}(jQuery),r(),$("#productCarouselHook").find("a").click(r).end().next().children("a").click(r),$("#productCarouselHook").prev().children("a").fancybox({titleShow:!0,cyclic:!0,overlayOpacity:.6,overlayColor:"#000",autoDimensions:!1,autoScale:!1,width:900,height:500,onStart:function(){badBrowser&&$("#fancybox-img").css({display:"none"})},onComplete:function(){badBrowser&&$("#fancybox-img").vAlign().css({display:"block"})}})}catch(n){console.log("classicGallery function error -> ",n)}function r(){var e=$(this),a=$("#productCarouselHook"),n=a.children("div"),r=n.children(),s=r.length,c=r.filter(":first").outerWidth(!0),l=(s-4)*c;if(this===window&&(n.width(r.filter(":first").outerWidth(!0)*r.length).data("pos",0),$(window).load(function(){n.css({left:0}).find("img").filter(function(){return 55>$(this).height()}).vAlign()})),s<=4&&a.next().children().hide(),e.hasClass("nextImg")&&!n.is(":animated")&&((pos=n.data().pos=n.data().pos+c)>=l&&($.browser.msie?e.hide():e.hide("slow")),pos>l&&(pos-=c),e.siblings("a").is(":hidden")&&($.browser.msie?e.siblings().show():e.siblings().show("slow")),n.animate({left:-1*pos},500)),e.hasClass("prevImg")&&!n.is(":animated")&&((pos=n.data().pos=n.data().pos-c)<0&&(pos=0),pos<=0&&($.browser.msie?e.hide():e.hide("slow")),e.siblings().is(":hidden")&&($.browser.msie?e.siblings().show():e.siblings().show("slow")),n.animate({left:-1*pos},500)),"productCarouselHook"===e.parent().parent().attr("id")){var e=$(this);e.attr("href","#"),selectedID=e.prevAll().length,e.siblings().removeClass("active").end().addClass("active");var o=e.parent().parent().prev().children("a").eq(selectedID);o.siblings().removeClass("active").end().addClass("active"),1===o.children("b").length?o.siblings("big").remove().end().after("<big/>").siblings("big").css({display:"block"}).html(o.children("b").html()):o.siblings("big").remove(),t&&o.find("img").imageResize({height:210,width:280})}}},quickviewAdminFieldsChanges=()=>{(htmlData.split('<body class="')[1]&&htmlData.split('<body class="')[1].split('"')[0].indexOf("quantity_false")>-1||htmlData.split('<body\r\n  class="')[1]?.split('"')[0].indexOf("quantity_false")>-1)&&$("#wrap_quickview #layout_item").addClass("zero_quantity"),(htmlData.split('<body class="')[1]&&htmlData.split('<body class="')[1].split('"')[0].indexOf("showallqv")>-1||htmlData.split('<body\r\n  class="')[1]?.split('"')[0].indexOf("showallqv")>-1)&&$("#wrap_quickview").addClass("showAllAdmin"),(htmlData.split('<body class="')[1]&&htmlData.split('<body class="')[1].split('"')[0].indexOf("hideallqv")>-1||htmlData.split('<body\r\n  class="')[1]?.split('"')[0].indexOf("hideallqv")>-1)&&$("#wrap_quickview").addClass("hideAllAdmin"),$(htmlData).find("div#item_son_items").length>0&&$("#wrap_quickview").addClass("itemDad"),"true"==show_upgrades&&"function"==typeof uploadFileFromUpgrade&&uploadFileFromUpgrade(),"true"==show_addCart&&quickviewAddToCartBtn(),"true"==show_buy_now&&quickviewBuyNowBtn(),(storeLayout?.indexOf("responsive")>0||void 0==storeLayout||767>$(window).width())&&$("#wrap_quickview #lightSlider").lightSlider({gallery:!0,item:1,loop:!1,slideMargin:0,thumbItem:6,useCSS:!0,adaptiveHeight:!0})},quickviewInventoryChanges=()=>{$("#wrap_quickview select.inventory").length&&($("#wrap_quickview #item_upgrades label.inventory").each(function(e,t){$(this).addClass("must_upgrade")}),$("#wrap_quickview #item_details #item_link_buy_now .buyNow").after('<div class="contactNow"><a>'+$("#wrap_quickview label.inventory").attr("data-contact")+"</a></div>"),$("#wrap_quickview .contactNow").hide(),$("#wrap_quickview .contactNow a").click(function(){window.location.href=$("#wrap_quickview .link_ask_about_item").attr("href")}),$('#wrap_quickview select.inventory:not(".unshown"), #wrap_quickview select.fake_select').change(function(){$('#wrap_quickview select.inventory:not(".unshown"), #wrap_quickview select.fake_select').each(function(e,t){if($(this).children(":selected").text().indexOf("חסר במלאי")>-1)return $("body").hasClass("special_cart")?($("#wrap_quickview .product_quantity").hide(),$("#wrap_quickview .fake_quantity").hide(),$("#wrap_quickview .contactNow").show().siblings(".buyNow").hide(),$("#wrap_quickview #layout_item div#item_details .contactNow a").length?($("#wrap_quickview #layout_item div#item_details .contactNow").show(),$("#wrap_quickview #layout_item div#item_details .contactNow a").show()):$("#wrap_quickview .item_option5 .price_wrap").after('<div class="contactNow"><a href="'+$("#wrap_quickview .layout_item a.bold_link.link_ask_about_item").attr("href")+'">צור קשר</a></div>')):($("#wrap_quickview .contactNow").show().siblings(".buyNow").hide(),$("#wrap_quickview .contactNow").show().parent().siblings("#add_to_cart").hide(),$("#wrap_quickview div#layout_item div#item_deal_items").hide(),$("#wrap_quickview .extra_btn").hide()),!1;$("body").hasClass("special_cart")?($("#wrap_quickview a.commit_to_real").show(),$("#wrap_quickview .product_quantity").show(),$("#wrap_quickview .fake_quantity").show(),$("#wrap_quickview .contactNow").show().siblings(".buyNow").show(),$("#wrap_quickview #layout_item div#item_details .contactNow").hide()):($("#wrap_quickview .buyNow").show().siblings(".contactNow").hide(),$("#wrap_quickview #add_to_cart").show().siblings("#item_link_buy_now ").children(".contactNow").hide(),$("#wrap_quickview .extra_btn").show())})}),$('#wrap_quickview select.inventory:not(".unshown")').change(function(){localSelectChanged_qv()}),$("#wrap_quickview select.inventory").each(function(e,t){select_options($(this)),isMultiple?main_code($(this),e):$(this).hasClass("fake_select")||$(this).children("option").each(function(e){if(0==$(this).siblings("option").length||e>0){if(void 0==$(this).attr("data-stock")){$(this).text("");return}check_for_stock($(this).attr("data-stock"))||$(this).text($(this).text()+" - "+$("#wrap_quickview label.inventory").attr("data-stock-text"))}})}),$('#wrap_quickview .item_main_bottom select.inventory:not(".unshown"), #wrap_quickview .item_main_bottom select.fake_select').each(function(e,t){$(this).children(":selected").text().indexOf("חסר במלאי")>-1&&($("#wrap_quickview a.commit_to_real").hide(),$("#wrap_quickview .contactNow").show().siblings(".buyNow").hide(),$("#wrap_quickview .fake_quantity").hide(),$("#wrap_quickview .product_quantity").hide())}))},quickviewStrengthsChanges=()=>{0==$("#wrap_quickview .item_main_bottom_left .extra_icons").length&&$("#wrap_quickview .item_main_bottom_left .icons ").after('<div class="extra_icons col-xs-12"><a class="icon pos_0 col-xs-4" target="_blank"><img src="'+extra_icons_icon1+'" alt=""></a><a class="icon pos_1 col-xs-4" target="_blank"><img src="'+extra_icons_icon2+'" alt=""></a><a class="icon pos_2 col-xs-4" target="_blank"><img src="'+extra_icons_icon3+'" alt=""></a></div>'),"true"==strengths_delete_content&&$("#wrap_quickview div#item_current_content ul.list").children().remove(),strengths_text1.length>0&&$("#wrap_quickview div#item_current_content ul.list").append("<li><strong>"+strengths_text1+"<i>&nbsp;</i></strong></li>"),strengths_text2.length>0&&$("#wrap_quickview div#item_current_content ul.list").append("<li><strong>"+strengths_text2+"<i>&nbsp;</i></strong></li>"),strengths_text3.length>0&&$("#wrap_quickview div#item_current_content ul.list").append("<li><strong>"+strengths_text3+"<i>&nbsp;</i></strong></li>"),strengths_text4.length>0&&$("#wrap_quickview div#item_current_content ul.list").append("<li><strong>"+strengths_text4+"<i>&nbsp;</i></strong></li>"),strengths_text5.length>0&&$("#wrap_quickview div#item_current_content ul.list").append("<li><strong>"+strengths_text5+"<i>&nbsp;</i></strong></li>")},quickviewChangesAfterLoad=()=>{try{$("#wrap_quickview").trigger("loadedqv"),setTimeout(function(){let e=$("#wrap_quickview #item_current_sub_title > span").height();e>43&&0==$("#wrap_quickview .sub_title_read_more_wrap").length&&($("#wrap_quickview #item_current_sub_title").after('<div class="sub_title_read_more_wrap"><a class="sub_title_read_more">קרא עוד...</a></div>'),$("#wrap_quickview #item_current_sub_title").css("max-height","43px"),$("#wrap_quickview #item_current_sub_title").removeClass("open"),$("#wrap_quickview .sub_title_read_more").text("קרא עוד..."),$("#wrap_quickview .sub_title_read_more").click(function(){e>43&&43==$("#wrap_quickview #item_current_sub_title").height()?($("#wrap_quickview #item_current_sub_title").addClass("open"),$("#wrap_quickview #item_current_sub_title").css("max-height","inherit"),$(".sub_title_read_more").text("סגור")):($("#wrap_quickview #item_current_sub_title").css("max-height","43px"),$("#wrap_quickview #item_current_sub_title").removeClass("open"),$("#wrap_quickview .sub_title_read_more").text("קרא עוד..."))})),$(window).trigger("resize")},500),$("#wrap_quickview #item_show_carousel ul#lightSlider li").each(function(){if($(this).find("img").attr("data-original")){var e=$(this).find("img").attr("data-original");$(this).find("img").attr("src",e)}}),"true"==show_strengths&&$("#wrap_quickview .extra_icons a").each(function(){if($(this).find("img").attr("data-original")){var e=$(this).find("img").attr("data-original");$(this).find("img").attr("src",e)}}),$("#wrap_quickview #item_upgrades .item_upgrades_with_images label").each(function(){if($(this).find("img").attr("data-original")){var e=$(this).find("img").attr("data-original");$(this).find("img").attr("src",e)}}),$("#wrap_quickview .special_cart_wrapper").append("<div class='note_upgrades'></div>"),$("#wrap_quickview .note_upgrades").click(function(){$("#wrap_quickview .link_wrapper a")[0].click()}),$("#wrap_quickview").hasClass("itemDad")&&$("#wrap_quickview .note_upgrades").text(btn_text_dad),$("#wrap_quickview").hasClass("hideAllAdmin")&&$("#wrap_quickview .note_upgrades").text(btn_text_hide),(-1==storeLayout?.indexOf("responsive")||void 0==storeLayout)&&($("#wrap_quickview .fake_quantity input.fake_counter").val("1").trigger("change"),$("#wrap_quickview .product_quantity .amount_feed input").val("1"),$("#wrap_quickview #item_show_carousel").length&&classicGallery())}catch(e){console.log("TCL: quickviewChangesAfterLoad -> error",e)}},sortUpgradesToShow=()=>{$("#wrap_quickview .upgrades_form_fields > div").each(function(){var e=$(this).find(".upgrade_topic_title").text();("כמות"==e||"כמות במלאי"==e)&&$(this).hide()}),$("#wrap_quickview #item_upgrades_top .upgrades_form_fields label").each(function(){let e=$(this);e.parent().addClass("upg_wrapper"),e.hasClass("inventory")&&e.parent().addClass("inventory"),e.hasClass("must_upgrade")&&e.parent().addClass("must_upgrade")}),$("#wrap_quickview #item_upgrades_top .upg_wrapper").each(function(){let e=$(this);e.hasClass("must_upgrade")||e.hasClass("inventory")||($("#wrap_quickview").hasClass("hide_upgrades")||$("#wrap_quickview").addClass("hide_upgrades"),e.addClass("hide_upgrade"))}),$("#wrap_quickview #item_upgrades_top .multipleSelects label").each(function(){let e=$(this);e.hasClass("must_upgrade")||($("#wrap_quickview").hasClass("hide_upgrades")||$("#wrap_quickview").addClass("hide_upgrades"),e.addClass("hide_upgrade"))}),$("#wrap_quickview #item_upgrades_top .item_upgrades_with_images div").each(function(){let e=$(this);e.hasClass("must_upgrade")?e.parent().addClass("must_upgrade"):($("#wrap_quickview").hasClass("hide_upgrades")||$("#wrap_quickview").addClass("hide_upgrades"),e.parent().addClass("hide_upgrade")),e.hasClass("showoneqv")&&e.parent().addClass("showoneqv")})},quickviewBuyNowBtn=()=>{if(0==$("#wrap_quickview .main_price_and_btn .special_cart_wrapper").length?$("#wrap_quickview div#item_link_buy_now").wrapAll('<div class="special_cart_wrapper"></div>'):$("#wrap_quickview .main_price_and_btn .special_cart_wrapper").append($("#wrap_quickview div#item_link_buy_now")),$(".special_cart_with_upgrades").length>0||$("div.cart").length>0)$("#wrap_quickview div#item_link_buy_now a#big_buy_now_link").click(function(e){e.stopPropagation(),$(".quickview_main .fake_quantity .commit_to_real").click(),$(".quickview_main .fake_quantity .commit_to_real").hasClass("btn_err_must_upgrade")||(submit_checkout(),$(".special_cart div.checkout a").click())});else{function e(){let e=$(this);e.addClass("active"),setTimeout(function(){e.removeClass("active").closest("form").submit()},200)}$("#wrap_quickview .product_quantity").remove(),$("#big_buy_now_link, #small_buy_now_link, #middle_buy_now_link, #deal_button, #son_button").click(function(e){let t=$("html").attr("lang"),a=!0;if($("#wrap_quickview .must_upgrade select option:selected").each(function(){if("בחר "==$(this).text()||!$(this).val()){if("he"==t)alert("נא למלא - "+$(this).parent().siblings("span").text());else{let e=$(this).parent().siblings("span").text().replace("שדרוג חובה","Must Upgrade");alert("Please fill - "+e)}return a=!1}}),!1==a||($("#wrap_quickview .upgrades_form_fields label.must_upgrade").each(function(){if(0!=$(this).parent().find("input:checkbox").length&&0==$(this).parent().find("input").filter(":checked").length){if("he"==t)alert("נא למלא - "+$(this).parent().find(".upgrade_topic_title").text());else{let e=$(this).parent().find(".upgrade_topic_title").text().replace("שדרוג חובה","Must Upgrade");alert("Please fill - "+e)}return a=!1}}),!1==a)||($("#wrap_quickview .upgrades_form_fields label.must_upgrade").each(function(){if(0!=$(this).find("input[type=text]").length&&0==$(this).find("input[type=text]").val().length){if("he"==t)alert("נא למלא - "+$(this).parent().find(".upgrade_topic_title").text());else{let e=$(this).parent().find(".upgrade_topic_title").text().replace("שדרוג חובה","Must Upgrade");alert("Please fill - "+e)}return a=!1}}),!1==a)||($("#wrap_quickview .upgrades_form_fields label.must_upgrade").each(function(){if(0!=$(this).find("textarea").length&&0==$(this).find("textarea").val().length){if("he"==t)alert("נא למלא - "+$(this).parent().find(".upgrade_topic_title").text());else{let e=$(this).parent().find(".upgrade_topic_title").text().replace("שדרוג חובה","Must Upgrade");alert("Please fill - "+e)}return a=!1}}),!1==a))return a;if($("#wrap_quickview label.must_upgrade input[type=file]").length){let n=$(".must_upgrade input[type=file]");return""==n.val()?(0==(msg=n.parent().parent().find(".upgrade_topic_title").text()).length&&(msg="he"==t?"נא לצרף קובץ":"Please attach file"),alert(msg),!1):!1!=/(\.jpg|\.jpeg|\.gif|\.png)$/i.test(n.val())||("he"==t?alert("ניתן לצרף קובץ מסוג תמונה בלבד, בפורמטים הבאים: jpg, jpeg, gif, png"):alert("Please attach only image file, in the following formats: jpg, jpeg, gif, png"),!1)}return a}),$("#wrap_quickview div.smallButton, div.buyNow").click(e)}},quickviewAddToCartBtn=()=>{try{let e=!!$("#wrap_quickview #layout_item #item_son_items").length,t=!$("#wrap_quickview #layout_item .buyNow").length;e||t||(0==$("#wrap_quickview #layout_item  .product_quantity").length&&0==$("#wrap_quickview #layout_item .fake_quantity").length&&$("#wrap_quickview #layout_item #item_details").append('<div class="product_quantity"><div class="reduce_item quantity"><a>-</a></div><div class="amount_feed"><input class="counter" value=0 type="number"></div><div class="add_item quantity"><a>+</a></div></div><div class="fake_quantity"><input type="text" class="fake_counter" value="0"><a class="commit_to_real"></a></div>'),add_to_cart_btn_text.length>0?$("#wrap_quickview #layout_item #item_details .commit_to_real").text(add_to_cart_btn_text):$("#wrap_quickview #layout_item #item_details .commit_to_real").text("הוספה לעגלה"),0==$("#wrap_quickview .main_price_and_btn .special_cart_wrapper").length&&$("#wrap_quickview .main_price_and_btn").append('<div class="special_cart_wrapper"></div>'),$("#wrap_quickview .special_cart_wrapper").prepend($("#wrap_quickview #item_details .fake_quantity")).prepend($("#wrap_quickview #item_details .product_quantity")),$("#wrap_quickview #layout_item").addClass("has_button"),resetCounter(),addAndReduceHandler(),addToCartHandler(),updateItemPrice())}catch(a){console.log("TCL: quickviewAddToCartBtn -> error",a)}},resetCounter=()=>{try{let e="1";$("#wrap_quickview #item_details span.quantity_step_value").length&&""!=$("#wrap_quickview #item_details span.quantity_step_value").text()&&(e=$("#wrap_quickview #item_details span.quantity_step_value").text()),$("#wrap_quickview .quickview .special_cart_wrapper .product_quantity .amount_feed input.counter").val(e),$("#wrap_quickview .quickview .special_cart_wrapper .fake_quantity input.fake_counter").val(e)}catch(t){console.log("TCL: resetCounter -> error",t)}},addAndReduceHandler=()=>{try{let e=0;$("#wrap_quickview #item_details .product_quantity .quantity").each(function(){let t=$(this);t.click(function(){e=t.parent().siblings(".fake_quantity").children(".fake_counter").val();let a=$("#wrap_quickview #item_details .quantity_step_value").length,n=parseFloat($("#wrap_quickview #item_details .quantity_step_value").text());t.hasClass("add_item")?1==a?e=parseFloat(e)+n:e++:(1==a?e=parseFloat(e)-n:e--,e<0&&(e=0),n<0&&(n=0)),1==a?t.parent().siblings(".fake_quantity").children(".fake_counter").val(e.toFixed(2)).trigger("change"):t.parent().siblings(".fake_quantity").children(".fake_counter").val(parseInt(e)).trigger("change")})}),$("#wrap_quickview #item_details .fake_quantity input.fake_counter").each(function(e,t){$(this).change(function(){$(this).parent().siblings(".product_quantity").find(".amount_feed input").val($(this).val())})})}catch(t){console.log("TCL: addAndReduceHandler -> error",t)}},addToCartHandler=()=>{try{if($(".special_cart_with_upgrades").length>0||$("div.cart").length>0){$("#wrap_quickview #item_details a.commit_to_real").click(function(){let e=$(this),t="1",a=e.parents("#item_details").first().find("span.quantity_step_value");if(a&&""!=a.text()&&(t=a.text()),!e.hasClass("zero_value")){e.siblings(".fake_counter").val(e.parent().parent().find(".product_quantity input.counter").val());let n=Number(e.siblings(".fake_counter").val());isNaN(n)?e.siblings(".fake_counter").addClass("err"):(e.siblings(".fake_counter").removeClass("err"),e.parent().siblings(".product_quantity").find(".amount_feed input.counter").val(e.siblings(".fake_counter").val()).trigger("change")),e.hasClass("btn_err_must_upgrade")||e.siblings(".fake_counter").val(t).trigger("change"),e.addClass("clicked")}}),$("#wrap_quickview #item_upgrades label.inventory").each(function(){$(this).addClass("must_upgrade")});let e="item_id_"+$("#wrap_quickview #item_id").val(),t=$("#wrap_quickview #item_show_price .price_value").text().replace("מחיר",""),a=$("#wrap_quickview #item_current_title h1 span").text(),n=$("#wrap_quickview div#item_show_carousel ul#lightSlider > li:first-child > img").attr("data-original")||$("#wrap_quickview div#item_show_carousel ul#lightSlider > li:first-child > img").attr("src");void 0==n&&(n=$("#wrap_quickview div#item_show_carousel .mainImage a img").attr("src"));let r=$("#wrap_quickview .multipleSelects select:not(.not_for_upgrades_cart), #wrap_quickview .upgrades_form_fields select:not(.not_for_upgrades_cart, .fake_select), #wrap_quickview .upgrades_form_fields input:not(.not_for_upgrades_cart), #wrap_quickview .upgrades_form_fields textarea:not(.not_for_upgrades_cart), #wrap_quickview .item_upgrades_with_images .checkbox-group input, #wrap_quickview #item_upgrades label.for_upgrades_cart input[type=file]");r.each(function(){$(this).change(function(){$("#wrap_quickview .commit_to_real").removeClass("clicked")})});let s=Number($("#wrap_quickview div#item_main span.quantity_step_value").text());0==s&&(s=1),$("#wrap_quickview .amount_feed input.counter").change(function(){$(this).parents(".product_quantity").first().siblings(".fake_quantity").find(".fake_counter").val($(this).val()).change();let c=Number($(this).val()),l=convert_upgrades_to_string(r),o=check_must_upgrade_qv($("#wrap_quickview .multipleSelects .must_upgrade select:not(.not_for_upgrades_cart), #wrap_quickview .upgrades_form_fields .must_upgrade select:not(.not_for_upgrades_cart), #wrap_quickview .upgrades_form_fields .must_upgrade input:not(.not_for_upgrades_cart), #wrap_quickview .upgrades_form_fields .must_upgrade textarea:not(.not_for_upgrades_cart), #wrap_quickview .item_upgrades_with_images .checkbox-group.must_upgrade input, #wrap_quickview .must_upgrade.for_upgrades_cart input[type=file], #wrap_quickview .must_upgrade_error.for_upgrades_cart input[type=file]")),p=0;for(let d=0;d<o.length;d++)!0!=o[d]&&(p=1);for(let u=0;u<o.length;u++)if(!0!=o[u]){let h=return_upgrade_div(o[u],"label");h.addClass("must_upgrade_error"),$("#wrap_quickview a.commit_to_real").hasClass("btn_err_must_upgrade")||$("#wrap_quickview a.commit_to_real").addClass("btn_err_must_upgrade"),0==h.find("span.must_upgrade_comment").length&&$(h).append($('<span class="must_upgrade_comment">שדרוג חובה</span>')),o[u].change(function(){""!=$(this).children("option:selected").val()&&null!=$(this).children("option:selected").val()&&void 0!=$(this).children("option:selected").val()?($(this).parent().removeClass("must_upgrade_error"),$(this).siblings(".must_upgrade_comment").remove(),$("#wrap_quickview a.commit_to_real").hasClass("btn_err_must_upgrade")&&$("#wrap_quickview a.commit_to_real").removeClass("btn_err_must_upgrade")):""!=$(this).children("option:selected").val()&&null!=$(this).children("option:selected").val()&&void 0!=$(this).children("option:selected").val()||($(this).parent().addClass("must_upgrade_error"),0!=$(this).parent().children("span.must_upgrade_comment").length||$(this).hasClass("unshown")||$(this).parent().append($('<span class="must_upgrade_comment">שדרוג חובה</span>')))})}else if(0==p){if($("#wrap_quickview #item_main .must_upgrade_comment").each(function(){$(this).remove()}),""==l)find_id(e,a,t,n,c,s),quickviewFadeout(),window.location.pathname.includes("orders")&&window.location.pathname.includes("new")&&$(".checkout a").click();else{let v=get_upgrades_price(r,t);find_id(e+"=>"+l,a,v,n,c,s,get_upgrades_text(r)),quickviewFadeout(),window.location.pathname.includes("orders")&&window.location.pathname.includes("new")&&$(".checkout a").click()}}}),$("#wrap_quickview .fake_counter").each(function(e,t){$(this).change(function(){$(this).siblings(".commit_to_real").removeClass("clicked"),"0."!=$(this).val()&&(isNaN(Number($(this).val()))||0>=Number($(this).val()))?($(this).siblings(".commit_to_real").addClass("zero_value"),$("#wrap_quickview #item_son_items").length||0!=$("#wrap_quickview span.zero_val_comment").length||$("#wrap_quickview #item_details #item_link_buy_now").after($('<span class="zero_val_comment">נא לבחור כמות</span>')),$(this).val("0")):($(this).siblings(".commit_to_real").removeClass("zero_value"),$("#wrap_quickview span.zero_val_comment").remove())}),$(this).keyup(function(){$(this).trigger("change")}),$(this).trigger("change")})}else $("#wrap_quickview .fake_quantity").click(function(){$("#wrap_quickview #item_link_buy_now .buyNow #big_buy_now_link").click()})}catch(c){console.log("TCL: addToCartHandler -> error",c)}},updateItemPrice=()=>{try{let e;$("#wrap_quickview #item_details #item_show_price .price_value").length>0?e=Number($("#wrap_quickview #item_show_price .price_value").text().replace(",","").replace("₪","").trim()):($("#wrap_quickview #item_details").prepend('<div class="wrap_price"><div id="item_show_price"><span class="price_title">מחיר ליח׳</span><span itemprop="offerDetails" itemscope="" itemtype="http://data-vocabulary.org/Offer"><meta itemprop="currency" content="ILS"><span class="price_value to_the_right" itemprop="price"></span></span></div></div>'),e=0);let t=e,a=0,n=$("#wrap_quickview #item_upgrades select:not(.unshown):not(.not_for_upgrades_cart), #wrap_quickview .upgrades_form_fields input:not(.not_for_upgrades_cart), #wrap_quickview .item_upgrades_with_images .checkbox-group label input");n.each(function(){$(this).change(function(){t=e,n.each(function(){"radio"==$(this).attr("type")||"checkbox"==$(this).attr("type")?$(this).is(":checked")&&(a=$(this).parent().hasClass("item_upgrades_with_images_radio_button")?$(this).parent().siblings(".item_upgrades_with_images_price").length>0?Number($(this).parent().siblings(".item_upgrades_with_images_price").text().replace(",","").replace("₪","").trim()):0:Number($(this).data("price")),t+=a):$(this).hasClass("fake_select")&&$(this).hasClass("level_0")?t+=0:$(this).hasClass("fake_select")&&$(this).hasClass("level_1")?void 0!=$(this).parent().parent().siblings("select.inventory").children("option:selected").data("price")&&""!=$(this).parent().parent().siblings("select.inventory").children("option:selected").data("price")&&(a=Number($(this).parent().parent().siblings("select.inventory").children("option:selected").data("price")),t+=a):void 0!=$(this).children("option:selected").data("price")&&""!=$(this).children("option:selected").data("price")?(a=Number($(this).children("option:selected").data("price")),t=Number((t+a).toFixed(1))):t+=0}),$("#wrap_quickview #item_show_price .price_value").text(t+" ₪"),$("#wrap_quickview .price_value").digits()})}),$.fn.digits=function(){return this.each(function(){$(this).text($(this).text().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))})}}catch(r){console.log("TCL: updateItemPrice -> error",r)}},quickviewDealItems=()=>{try{$("div#item_deal_items table.deal_items td:not(.plus,.equal,.deal_button,:first-child)").each(function(){let e=$(this);e.append(listItemQvBtn),e.find(".quickview_btn_wrapper").click(function(){let e=$(this).parent().attr("class").split(" ")[0].split("_")[1];quickviewBtnClickHandler(e,"")})})}catch(e){console.log("TCL: function quickviewDealItems -> error",e)}},quickviewAlsoBuyItems=()=>{try{$("#bg_middle #item_also_buy em").each(function(){let e=$(this);e.append(listItemQvBtn)}),$("#bg_middle #item_also_buy").on("click",".quickview_btn_wrapper",function(){let e=$(this).parent().find('input[name="item_ids[]"]').val().match(/\d+/)[0];quickviewBtnClickHandler(e,"")})}catch(e){console.log("TCL: function quickviewAlsoBuyItems -> error",e)}};function select_options(e){$(e).children("option").each(function(e){e>0&&void 0!=$(this).attr("data-values")&&$(this).attr("data-values").indexOf(";")>0&&(isMultiple=!0)})}function main_code(e,t){$(e).children("option").each(function(){item_upgrades_js[$(this).val()]=Number($(this).attr("data-price"))}),$(e).hide().addClass("unshown");let a,n=[];$(e).children("option").each(function(){void 0!=$(this).attr("data-values")&&(a=[$(this).val()],$.each(str_to_arr($(this).attr("data-values")),function(e,t){a.push(t)}),a.push($(this).attr("data-stock")),a.push($(this).attr("data-price")),n.push(a),a=[])}),num_of_levels=(arr_heading=str_to_arr($($("#wrap_quickview label.inventory")[t]).attr("data-titles"))).length;for(var r=0;r<n.length;r++)for(var s=itemUpgrades,c=1;c<n[r].length-2;c++)s[n[r][c]]||(c==n[r].length-3?s[n[r][c]]=n[r][0]+"-"+n[r][c+1]+"-"+n[r][c+2]:s[n[r][c]]={}),s=s[n[r][c]];$($("#wrap_quickview label.inventory")[t]).append('<div class="fake_selects pos_'+t+'"></div>');for(var c=0;c<num_of_levels;c++)$("#wrap_quickview .fake_selects.pos_"+t).append('<div class="level_'+c+'"><label class="level_'+c+'">'+arr_heading[c]+'</label><select class="fake_select pos_'+t+" level_"+c+'" disabled></select></div>');return $("#wrap_quickview select.fake_select.pos_"+t+".level_0").append(createOptions(itemUpgrades)).removeAttr("disabled"),$("#wrap_quickview select.fake_select").change(function(){level=Number($(this).attr("class").charAt($(this).attr("class").length-1)),reset_selects($(e),level+1),$(e).trigger("change"),"string"==typeof get_last_select_value()?/Android|webOS|iPhone|iPod|Blackberry|Windows Phone/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?$("#wrap_quickview select.inventory").val($('#wrap_quickview select.inventory > option[value="'+get_last_select_value().toString().split("-")[0]+'"]').val()).trigger("change"):$('#wrap_quickview select.inventory > option[value="'+get_last_select_value().toString().split("-")[0]+'"]').attr("selected","selected").trigger("change"):""!=$(this).val()&&refresh_selects(t)}),$("#wrap_quickview .upgrade_topic_title").css({display:"none"}),!0}function str_to_arr(e){var t=[];return $.each(e.split(";"),function(e,a){t.push(a)}),t}function get_last_select_value(){let e=itemUpgrades,t;for(var a=0;a<num_of_levels&&""!=(t=$("#wrap_quickview select.fake_select.level_"+a).val())&&null!=t;a++)e=e[t];return e}function refresh_selects(e){let t=itemUpgrades,a;for(var n=0;n<num_of_levels;n++){if(""==(a=$("#wrap_quickview select.fake_select.level_"+n).val()))return!0;if(null==a)return enable_select(n,t,e);t=t[a]}return t}function reset_selects(e,t){if(0==t)return!1;for($(e).children("option").first().attr("selected","selected"),i=t;i<num_of_levels;i++)$("#wrap_quickview select.level_"+i).html("").attr("disabled",!0);return!0}function enable_select(e,t,a){return($elem=$("#wrap_quickview select.fake_select.level_"+e)).append(createOptions(t)),$elem.removeAttr("disabled"),!0}function createOptions(e){var t='<option value="">בחר</option>\n',a="";return $.each(e,function(e,n){if("string"==typeof n){var r=e;n.split("-")[2].length&&0!=Number(n.split("-")[2])&&(r+=" - "+n.split("-")[2]+" "+$("#wrap_quickview label.inventory").attr("data-currency")),("0"==n.split("-")[1]||""==n.split("-")[1])&&(a=" out_of_stock",r+=" - "+$("#wrap_quickview label.inventory").attr("data-stock-text")),t+='<option value="'+e+'"'+a+">"+r+"</option>\n"}else t+='<option value="'+e+'">'+e+"</option>\n"}),t}function check_for_stock(e){var t=Number(e);return!isNaN(t)&&!(t<=0)}function localSelectChanged_qv(){var e=Number($("#wrap_quickview .price_value").attr("content"));$("#wrap_quickview select option:selected").each(function(){$(this).val()&&(value=item_upgrades_js[$(this).val()],!1==isNaN(value)&&(e+=value))}),sumStr=(0^e)!==e?Number(e).toFixed(2):e,e==origin_price?($("#wrap_quickview .price_value").html(sumStr+" ₪"),$("#wrap_quickview a.link_payments_table").attr("href","/items/4608337/payments")):($("#wrap_quickview .price_value").html(sumStr+" ₪ <span class='tiny'>כולל שדרוגים</span>"),$("#wrap_quickview a.link_payments_table").attr("href","/items/4608337/payments?total_price="+e)),$("#wrap_quickview .price_value").length&&$("#wrap_quickview .price_value").html($("#wrap_quickview .price_value").html().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"))}function check_must_upgrade_qv(e){var t=[],a={};if(e.length>0){$.each(e,function(e,n){"radio"==$(this).attr("type")||"checkbox"==$(this).attr("type")?$(this).parent().parent().parent().hasClass("upgrade_is_checked")||$(this).parent().parent().hasClass("upgrade_is_checked")||($(this).is(":checked")?(a[$(this).attr("name")]=!0,$(this).parent().parent().parent().hasClass("checkbox-group")?$(this).parent().parent().parent().addClass("upgrade_is_checked"):$(this).parent().parent().addClass("upgrade_is_checked")):a[$(this).attr("name")]=!1):""==$(this).val()||null==$(this).val()||void 0==$(this).val()?t.push($(this)):t.push(!0)});var n=0,r=0;$.isEmptyObject(a)?t.push(!0):($.each(a,function(e,t){n++}),$.each(a,function(e,a){!1==a&&t.push($('[name="'+e+'"]')),!0==a&&r++,n==r&&t.push(!0)}))}else t.push(!0);return t}"true"==show_list_items&&(quickviewLayoutListItems(),($("body").hasClass("layout_category")||$("body").hasClass("layout_items")||$("body").hasClass("layout_X"))&&quickviewFuncInfscr()),$(window).load(function(){$(".element_general_prime_categories .drop-wrapper .layout_list_item").each(function(){$(this).find(".quickview_btn_wrapper").hide()}),quickviewDynamicCarousel()}),$("body").hasClass("layout_item")&&$("body").hasClass("layout_responsive")&&("true"==show_deal_items&&quickviewDealItems(),"true"==show_also_buy&&quickviewAlsoBuyItems()),$(document).ready(function(){$("#wrap_quickview .close_quickview").click(function(e){quickviewFadeout()}),$("#wrap_quickview #quickview_backdrop").click(function(e){e.target===this&&quickviewFadeout()})});const radioToCheckboxQV=()=>{try{$("#wrap_quickview").on("openqv",function(){$(".item_upgrades_with_images .checkbox-group label").each(function(e){var t=$(this).find("input[type='radio']");"radio"==t.attr("type")&&$(this).find("input[type='radio']").attr("type","checkbox")})})}catch(e){console.log("radio to checkbox error: "+e)}},inventoryMatrixPicturesQV=()=>{console.log("boom");try{console.log("boom1"),$("#wrap_quickview").on("loadedqv",function(){setTimeout(function(){$("#wrap_quickview #item_details label.pic_inventory.inventory").each(function(){var e=$(this);$(this).find(".fake_selects > div").each(function(t,a){var n=t;$(this).after('<div class="qv_inventory_pics qv_inventory_pics_'+n+'"><ul></ul></div>'),e.find("select.inventory option").each(function(){if(exists=!1,void 0!=$(this).attr("data-title")&&""!=$(this).attr("data-title")&&void 0!=$(this).attr("data-image")&&""!=$(this).attr("data-image")){var t=$(this).attr("data-values").split(";")[n].trim();if(e.find(".fake_selects > .qv_inventory_pics_"+n+" ul li").each(function(){if($(this).attr("data-title")==t)return exists=!0,!1}),!exists){var a=$(this).attr("data-image");e.find(".fake_selects > .qv_inventory_pics_"+n+" ul").append("<li data-title='"+t+"' data-img-src='"+a+"' style='background-image: url("+a+");'></li>")}}})}),e.find(".fake_selects > .qv_inventory_pics_0 ul li").addClass("enabled"),e.find(".fake_selects > .qv_inventory_pics ul li").click(function(){if($(this).hasClass("enabled")){if($(this).closest(".qv_inventory_pics").hasClass("qv_inventory_pics_0")){e.find(".fake_selects > .qv_inventory_pics ul li").removeClass("active");let t=$(this).attr("data-title");$(this).closest(".qv_inventory_pics").prev().find("label > span").length?$(this).closest(".qv_inventory_pics").prev().find("label > span").text(" - "+t):$(this).closest(".qv_inventory_pics").prev().find("label").append("<span> - "+t+"</span>"),$("div#item_details label.pic_inventory.inventory .fake_selects  label.level_1 span").length?$("div#item_details label.pic_inventory.inventory .fake_selects  label.level_1 span").show():$("div#item_details label.pic_inventory.inventory .fake_selects  label.level_1").append("<span> - בחר צבע לצפייה בתמונה</span>")}else $(this).closest(".qv_inventory_pics").hasClass("qv_inventory_pics_1")&&($(this).closest(".qv_inventory_pics").find("li").removeClass("active"),$("div#item_details label.pic_inventory.inventory .fake_selects  label.level_1 span").hide());$(this).addClass("active");var a=$(this).attr("data-title");$(this).closest(".qv_inventory_pics").prev().find("select").val(a),$(this).closest(".qv_inventory_pics").prev().find("select").trigger("change")}}),e.find(".fake_selects select.fake_select.pos_0.level_0").change(function(){e.find(".fake_selects > .qv_inventory_pics_1 ul li").removeClass("enabled").removeClass("disabled");var t=$(this).val();""!=t&&e.find(".fake_selects > .qv_inventory_pics_1 ul li").each(function(){var a=$(this),n=$(this).attr("data-title");e.find('select.inventory option[data-values*="'+n+'"]').each(function(){if(a.closest(".qv_inventory_pics").prev().find('select option[value="'+n+'"]').text().includes("חסר במלאי"))a.addClass("disabled").removeClass("enabled");else{var e=!1,r=$(this).attr("data-values").split(";");if($.each(r,function(a,n){if(n.trim()===t.trim())return e=!0,!1}),e)return a.addClass("enabled").removeClass("disabled"),!1;a.addClass("disabled").removeClass("enabled")}})})})}),$("#wrap_quickview div#item_details label.pic_inventory.inventory .fake_selects > .qv_inventory_pics.qv_inventory_pics_0 li").each(function(){$(this).text($(this).data("title"))}),$("#wrap_quickview div#item_details label.pic_inventory.inventory .fake_selects > .qv_inventory_pics.qv_inventory_pics_1 ul li").each(function(){$(this).html("<span>"+$(this).attr("data-title")+"</span>")}),0!=$("#wrap_quickview .qv_inventory_pics").length&&$("#wrap_quickview div#item_details label.pic_inventory.inventory .fake_selects > div:not(.qv_inventory_pics) select").css({display:"none"})},1e3)})}catch(e){console.log("inventoryMatrixPicturesQV error: "+e)}},upgradesCubesQV=()=>{function e(e,t,a){this.id=e,this.name=t,this.options=a}function t(e,t,a,n){this.name=e,this.price=t,this.value=a,this.qty=n}function a(){var a=[];return $("#wrap_quickview .inventory.must_upgrade select").each(function(){var n=[];$(this).find("option").each(function(){if(""!=$(this).attr("value")){var e=$(this).attr("data-title"),a=$(this).attr("data-price"),r=$(this).attr("value"),s=$(this).attr("data-stock");n.push(new t(e,a,r,s))}});var r=$(this).attr("id"),s=$(this).attr("data-topic-title");a.push(new e(r,s,n)),$(this).parent().addClass("hideoneqv"),$(".hideoneqv").prev().hide()}),a}function n(e){$("#wrap_quickview #item_upgrades_top").append('<div id="special_upgrade-wrapper"></div>'),$.each(e,function(e,t){var a=this.id,n=this.name;$("#wrap_quickview #special_upgrade-wrapper").append('<h3 class="upgrade_title">'+n+'</h3><ul class="special_upgrade" data-id="'+a+'"></ul>'),$.each(this.options,function(){var e=this.name,t=this.price,n=this.qty,r=this.value;$("#wrap_quickview ul[data-id="+a+"]").append('<li data-price="'+t+'" data-qty="'+n+'" value="'+r+'">'+e+"</li>")})})}function r(){var e=a();n(e),p()}function s(e,t){$("#wrap_quickview #"+e+" option[value="+t+"]").attr("selected",!0).attr("selected","selected").siblings().removeAttr("selected").removeAttr("selected"),$("#wrap_quickview #"+e+" option[value="+t+"]").trigger("change"),$("#wrap_quickview #"+e).val(t),console.log("succeeded on iphone "+$("#"+e).val())}function c(){if($("#wrap_quickview .special_upgrade.dup .active").length==$(".special_upgrade.dup").length){var e="",t=$("#wrap_quickview .special_upgrade.dup .active").length;counter=1,$("#wrap_quickview .special_upgrade.dup .active").each(function(){t==counter&&(e+="-"),e+=$(this).text().trim(),counter++}),$("#wrap_quickview .special_upgrade").not(".dup").find("li").each(function(){$(this).text().trim().replace(/ /g,"")==e&&$(this).click().trigger("click")})}}function l(){$("#wrap_quickview #special_upgrade-wrapper").each(function(){var e=$(this).find(".upgrade_title:first-child").text().split("-")[0].trim(),t=$(this).find(".upgrade_title:first-child").text().split("-")[1].trim(),a={name:e,sizes:[]},n={name:t,sizes:[]};$(this).find(".special_upgrade:nth-of-type(1) li").each(function(){a.sizes.push($(this).text().split("-")[0]),n.sizes.push($(this).text().split("-")[1])}),a.sizes=o(a.sizes),n.sizes=o(n.sizes);var r=[a,n],s=0;$.each(r,function(e,t){var a=this.name;$("#wrap_quickview #special_upgrade-wrapper").append('<h3 class="upgrade_title">'+this.name+"</h3"),$("#wrap_quickview #special_upgrade-wrapper").append("<ul data-position="+s+' data-section="'+this.name+'"class="special_upgrade dup pos_'+s+'"></ul>'),s++,$.each(this.sizes,function(e,t){$('ul[data-section="'+a+'"]').append('<li class="upgrade_title">'+t+"</li")})})}),p(),$("#wrap_quickview .special_upgrade.dup li").click(function(){c()})}function o(e){for(var t={},a=0;a<e.length;a++)t[e[a]]=!0;var n=[];for(var r in t)n.push(r);return n}function p(){$("#wrap_quickview ul.special_upgrade li").click(function(){$(this).siblings(".active").removeClass("active"),$(this).addClass("active");var e=$(this).parent().attr("data-id"),t=$(this).attr("value");s(e,t)})}function d(){$("#wrap_quickview .special_upgrade.dup.pos_0 li").click(function(){var e=[];$("#wrap_quickview .special_upgrade.dup .hide").removeClass("hide"),$("#wrap_quickview .special_upgrade.dup .verified").removeClass("verified");var t=$(this).text().trim(),a="",n=Number($(this).parent().attr("data-position")),a=Number($(this).parent().siblings(".dup").attr("data-position"));e[n]=t,$(this).parent().siblings(".dup").find("li").each(function(){e[a]=$(this).text().trim();var t=0;$("#wrap_quickview ul.special_upgrade").first().find("li").each(function(){var a=$(this).text().trim().replace(/ /g,"").split("-");a[0]==e[0]&&a[1]==e[1]&&t++}),t<1?$(this).addClass("hide"):$(this).addClass("verified")})})}try{$(document).ready(function(){$("#wrap_quickview").on("openqv",function(){$("#wrap_quickview .inventory").parent(".must_upgrade").parent().addClass("hide"),setTimeout(function(){r(),$("#wrap_quickview ul.special_upgrade li").each(function(e,t){0==$(this).attr("data-qty")&&($(this).css("background","linear-gradient(25deg,"+out_of_stock_back+" 49%,#000 50%,"+out_of_stock_back+" 51%)"),$(this).css("color",out_of_stock_color))}),$("#wrap_quickview div#item_upgrades_top > div#item_upgrades").css("display","block"),$("#wrap_quickview .double.inventory").length&&($("#wrap_quickview#special_upgrade-wrapper .special_upgrade").css("display","none"),$("#wrap_quickview #special_upgrade-wrapper .special_upgrade").prev().css("display","none"),l(),$("#wrap_quickview #special_upgrade-wrapper .special_upgrade").first().find("li").each(function(){"0"==$(this).attr("data-qty")&&$(this).remove(),d()}),$("#wrap_quickview #special_upgrade-wrapper .special_upgrade").each(function(){$(this).find("li").each(function(){"undefined"==$(this).attr("data-qty")&&$(this).parent().remove()})}),$("#wrap_quickview .must_upgrade div.fake_selects").remove())},500),console.log("grid modification done")})}),$("#wrap_quickview").on("openqv",function(){$("#wrap_quickview ul.special_upgrade li").click(function(){}),0==$("#wrap_quickview ul.special_upgrade li.active").attr("data-qty")?($("#wrap_quickview #item_link_buy_now .contactNow").show(),$("#wrap_quickview #item_link_buy_now .buyNow").hide()):($("#wrap_quickview #item_link_buy_now .contactNow").hide(),$("#wrap_quickview #item_link_buy_now .buyNow").show())})}catch(u){console.log("upgrades to cubes: "+u)}};$(document).ready(function(){try{"true"==use_upgrade_radio_checkbox&&radioToCheckboxQV(),"true"==use_inventory_matrix_pictures&&inventoryMatrixPicturesQV(),"true"==use_upgrades_cubes&&upgradesCubesQV()}catch(e){console.log("special upgrades error: "+e)}});